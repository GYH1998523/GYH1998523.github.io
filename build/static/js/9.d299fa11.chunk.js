(this["webpackJsonpreact-app2"]=this["webpackJsonpreact-app2"]||[]).push([[9],{297:function(e,t,n){"use strict";var a=n(16),o=n(298);n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o.a})),n.d(t,"b",(function(){return o.b}));var i=new a.b},298:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return c}));var a=n(299),o=n.n(a);n.d(t,"a",(function(){return o.a}));var i=n(58),s=n(297),c="https://47.100.174.253:2020/",l="";function r(e){i.q.hide(),i.q.fail(e,1)}function u(e){i.q.hide(),i.q.success(e,1)}o.a.defaults.baseURL=c,o.a.defaults.headers.common.token=l,o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",o.a.interceptors.request.use((function(e){var t,n;return t=t||"\u8bf7\u6c42\u4e2d...",n=n||1,i.q.hide(),i.q.loading(t,n,(function(){console.log("Load complete !!!")})),l=sessionStorage.token?sessionStorage.token:"",e.headers.token=l,e}),(function(e){var t;return t="\u8bf7\u6c42\u5931\u8d25-\u7f51\u7edc\u5f02\u5e38",i.q.hide(),i.q.offline(t,1),Promise.reject(e)})),o.a.interceptors.response.use((function(e){return console.log(e),"3000"==e.data.code&&s.c.push("/login"),e.data.type?u(e.data.msg):0==e.data.type?r(e.data.msg):u(e.data.msg),e}),(function(e){return r("\u54cd\u5e94\u5931\u8d25-\u670d\u52a1\u5668\u5f02\u5e38"),Promise.reject(e)}))},300:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(38),o=n(39),i=n(41),s=n(40),c=n(42),l=(n(301),n(0)),r=n.n(l),u=n(58),p=n(297),m=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"handleGoBack",value:function(e){e&&p.c.goBack()}},{key:"goToSearch",value:function(){p.c.push("/search")}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.show,o=t.search;return r.a.createElement("div",null,r.a.createElement(u.k,{mode:"light",icon:a&&r.a.createElement(u.h,{type:"left"}),onLeftClick:function(){return e.handleGoBack(a)},rightContent:[!o&&r.a.createElement(u.h,{onClick:this.goToSearch.bind(this),key:"0",type:"search",style:{marginRight:"16px"}}),r.a.createElement(d,{scan:this.props.scan,login:this.props.login,key:1})]}," ",n," "))}}]),t}(l.Component),h=u.m.Item,f=function(e){return r.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/rmsportal/".concat(e,".svg"),className:"am-icon am-icon-xs",alt:""})},d=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={visible:!1,selected:""},n.handleVisibleChange=function(e){n.setState({visible:e})},n.onSelect=function(e){console.log(e.props.value),n.setState({visible:!1,selected:e.props.value}),"login"==e.props.value?p.c.push("/login"):"scan"==e.props.value?p.c.push("/scan"):n.showActionSheet()},n.showActionSheet=function(){var e=["\u62cd\u7167","\u4ece\u624b\u673a\u76f8\u518c\u9009\u62e9","\u4f7f\u7528\u76f8\u673a\u62cd\u7167","\u5220\u9664","\u53d6\u6d88"];u.a.showActionSheetWithOptions({options:e,cancelButtonIndex:e.length-1,destructiveButtonIndex:e.length-2,message:"wh1910-app",maskClosable:!0,"data-seed":"logId",wrapProps:{onTouchStart:function(e){return e.preventDefault()}}},(function(e){console.log(e)}))},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.scan,n=e.login;return r.a.createElement("div",null,r.a.createElement(u.m,{mask:!0,overlayClassName:"fortest",overlayStyle:{color:"currentColor"},visible:this.state.visible,overlay:[!t&&r.a.createElement(h,{key:"4",value:"scan",icon:f("tOtXhkIWzwotgGSeptou"),"data-seed":"logId"},"\u626b\u4e00\u626b"),r.a.createElement(h,{key:"5",value:"photo",icon:f("PKAgAqZWJVNwKsAJSmXd"),style:{whiteSpace:"nowrap"}},"\u62cd\u7167"),!n&&r.a.createElement(h,{key:"6",value:"login",icon:f("uQIYTFeRrjPELImDRrPt")},r.a.createElement("span",{style:{marginRight:5}},"\u767b\u5f55"))],align:{overflow:{adjustY:0,adjustX:0},offset:[-10,0]},onVisibleChange:this.handleVisibleChange,onSelect:this.onSelect},r.a.createElement(u.h,{type:"ellipsis"})))}}]),t}(l.Component)},301:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){e.exports=n.p+"static/media/mine.2b8fafb2.gif"},358:function(e,t,n){},368:function(e,t,n){"use strict";n.r(t);var a,o=n(38),i=n(39),s=n(41),c=n(40),l=n(42),r=(n(356),n(0)),u=n.n(r),p=n(300),m=n(357),h=n.n(m),f=n(58),d=(n(358),n(297)),g=n(122),b=n.n(g),v=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(c.a)(t).call(this))).getInitPic=function(){d.a.post("/react/getlastPic").then((function(t){t.data.type?e.setState({pic:t.data.result.pic.replace(/public/,d.b)}):e.setState({pic:b.a})}))},e.handleClick=function(){e.fileImg.click()},e.handleChange=function(){console.log("\u6587\u4ef6\u4e0a\u4f20");var t=e.fileImg.files[0];console.log(t);var n=new FormData;n.append("avatar",t),Object(d.a)({url:"/react/uploadImg",method:"POST",data:n}).then((function(t){if(t.data.type){var n=t.data.pic.replace(/public/,d.b),a=JSON.stringify({mobile:t.data.mobile,pic:n});localStorage.userInfo=a,e.setState({pic:n})}else localStorage.userInfo=""}))},e.state={pic:null},e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.userInfo;e&&(e=JSON.parse(e)).mobile==sessionStorage.mobile?this.setState({pic:e.pic}):this.getInitPic()}},{key:"render",value:function(){var e=this,t=this.state.pic;return u.a.createElement("div",null,u.a.createElement("img",{src:t,alt:"",className:"touxiang",onClick:this.handleClick}),u.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.handleChange,ref:function(t){return e.fileImg=t}}))}}]),t}(r.Component),y=n(118),k="",S=Object(y.b)((function(e){return{token:e.getIn(["user","token"]),mobile:e.getIn(["user","mobile"])}}))(a=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).gotomylove=function(){n.props.history.push("/mylove")},n.state={token:!!sessionStorage.token,mobile:!!sessionStorage.mobile},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){sessionStorage.mobile?((k=(k=sessionStorage.mobile.toString()).split("")).splice(3,4,"****").join(""),console.log(k)):this.props.history.push("/login")}},{key:"componentDidMount",value:function(){var e=this;d.a.post("/react/getMobile").then((function(t){e.setState({mobile:t.data.result})}))}},{key:"gotoLogin",value:function(){sessionStorage.mobile="",sessionStorage.token="",this.props.history.push("/login")}},{key:"render",value:function(){f.i.Item.Brief;var e=this.props;e.token,e.mobile;return u.a.createElement("div",null,u.a.createElement(p.a,{title:"\u4e2a\u4eba\u4e2d\u5fc3"}),u.a.createElement("div",{className:"top"},u.a.createElement("img",{className:"img2",src:h.a,alt:""}),u.a.createElement("div",{className:"uploadImg"}," ",u.a.createElement(v,null)," ")),u.a.createElement(f.d,null,u.a.createElement(f.d.Header,{title:k,thumb:"https://gw.alipayobjects.com/zos/rmsportal/MRhHctKOineMbKAZslML.jpg",extra:u.a.createElement("span",null,"\u6b22\u8fce\u60a8\u4f7f\u7528\u672c\u4ea7\u54c1")}),u.a.createElement(f.d.Body,null,u.a.createElement("div",null,"\u4e3a\u4e86\u66f4\u7f8e\u597d\u7684\u660e\u5929"))),u.a.createElement("div",{className:"lists",onClick:this.gotomylove},u.a.createElement("span",{className:"iconfont icon-xihuan xihuan"}),"   \u8fdb\u5165\u6211\u7684\u559c\u6b22"),u.a.createElement("div",{className:"lists"},u.a.createElement("span",{className:"iconfont icon-gouwuche xihuan"}),"   \u770b\u770b\u6211\u7684\u8d2d\u7269\u8f66"),u.a.createElement("div",{className:"lists"},u.a.createElement("span",{className:"iconfont icon-youqu xihuan"}),"   \u6211\u7684\u5174\u8da3"),u.a.createElement("button",{className:"mineBtn",onClick:this.gotoLogin},"\u9000\u51fa\u767b\u5f55"))}}]),t}(r.Component))||a;t.default=S}}]);
//# sourceMappingURL=9.d299fa11.chunk.js.map