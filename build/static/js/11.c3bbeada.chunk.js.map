{"version":3,"sources":["utils/index.js","utils/axios.js","scripts/components/head/index.js","scripts/mobx/detail.js","scripts/views/detail/index.js"],"names":["history","createHashHistory","baseURL","token","fail","msg","Toast","hide","success","axios","defaults","headers","common","post","interceptors","request","use","config","time","loading","console","log","sessionStorage","error","offline","Promise","reject","response","data","code","push","type","Head","show","goBack","this","props","title","search","mode","icon","onLeftClick","handleGoBack","rightContent","onClick","goToSearch","bind","key","style","marginRight","Pop","scan","login","Component","Item","Popover","myImg","src","className","alt","state","visible","selected","handleVisibleChange","setState","onSelect","opt","value","showActionSheet","BUTTONS","ActionSheet","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","wrapProps","onTouchStart","e","preventDefault","buttonIndex","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange","Detail","count","observable","action","computed","flag","goodsName","mobile","a","async","res","over_image_url","sale_point","mylove","result","goodsId","goodsInfo","item_name","min_price","inTocart","observer","inMylOVE","URLSearchParams","location","get","detail","getFlag","insertMyLove","insertCart","inToCart","getGoodsMsg","getFlag2","slice","item_groups","map","item","i","activity_name","activity_brief","activity_title","text","padding","backgroundColor","borderRadius","border","promotions","width","byGood"],"mappings":"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","file":"static/js/11.c3bbeada.chunk.js","sourcesContent":["\r\nimport { createHashHistory } from \"history\"\r\n\r\nexport { config } from \"./config\"\r\n\r\n\r\nexport { axios, baseURL } from \"./axios\"\r\n\r\n\r\n\r\n\r\n\r\nexport const history = new createHashHistory()","\r\n\r\nimport axios from \"axios\";\r\nimport { Toast } from \"antd-mobile\"\r\nimport { history } from \"&\"\r\n// const baseURL = 'http://localhost:2020/'\r\n\r\n// const baseURL = 'http://47.100.174.253:2020/'\r\nconst baseURL = 'https://47.100.174.253:2020/'\r\n\r\nlet token = \"\";\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.common['token'] = token;\r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n\r\nexport function loadingToast(msg, time) {\r\n    msg = msg || \"请求中...\";\r\n    time = time || 1;\r\n    Toast.hide();\r\n    Toast.loading(msg, time, () => {\r\n        console.log('Load complete !!!');\r\n    });\r\n}\r\n\r\nexport function fail(msg) {\r\n    Toast.hide();\r\n    Toast.fail(msg, 1);\r\n}\r\n\r\nexport function offline(msg) {\r\n    Toast.hide();\r\n    Toast.offline(msg, 1);\r\n}\r\n\r\nexport function success(msg) {\r\n    Toast.hide()\r\n    Toast.success(msg, 1);\r\n}\r\naxios.interceptors.request.use(function (config) {\r\n\r\n    // 配置动画\r\n    loadingToast();\r\n    token = sessionStorage.token ? sessionStorage.token : \"\";\r\n    config.headers['token'] = token;\r\n    return config;\r\n}, function (error) {\r\n    // 请求失败错误提示 \r\n    offline(\"请求失败-网络异常\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\naxios.interceptors.response.use(function (response) {\r\n\r\n    console.log(response)\r\n    if (response.data.code == \"3000\") {\r\n        history.push(\"/login\");\r\n    }\r\n\r\n    if (!!response.data.type) {\r\n        success(response.data.msg);\r\n    } else {\r\n        if (response.data.type == 0) {\r\n            fail(response.data.msg)\r\n        } else {\r\n            success(response.data.msg)\r\n        }\r\n    }\r\n\r\n\r\n    return response;\r\n}, function (error) {\r\n\r\n    fail(\"响应失败-服务器异常\")\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport { axios, baseURL }","import \"./index.scss\";\r\nimport React, { Component } from \"react\"\r\nimport {\r\n    NavBar, Icon, Popover, ActionSheet\r\n} from \"antd-mobile\"\r\nimport { history } from \"&\"\r\n\r\n\r\nexport default class Head extends Component {\r\n    handleGoBack(show) {\r\n        if (show) {\r\n            history.goBack();\r\n        }\r\n    }\r\n    goToSearch() {\r\n        history.push(\"/search\");\r\n    }\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            search,\r\n        } = this.props\r\n        return (\r\n            <div>\r\n                <NavBar\r\n\r\n                    mode=\"light\"\r\n                    icon={show && <Icon type=\"left\" />}\r\n                    onLeftClick={() => this.handleGoBack(show)}\r\n                    rightContent={[\r\n                        !search && <Icon onClick={this.goToSearch.bind(this)} key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />,\r\n                        <Pop scan={this.props.scan} login={this.props.login} key={1} />,\r\n                    ]}\r\n                > {title} </NavBar>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\n\r\nexport class Pop extends Component {\r\n    state = {\r\n        visible: false,\r\n        selected: \"\"\r\n    }\r\n    handleVisibleChange = (visible) => {\r\n        this.setState({\r\n            visible\r\n        })\r\n    }\r\n    onSelect = (opt) => {\r\n        console.log(opt.props.value);\r\n        this.setState({\r\n            visible: false,\r\n            selected: opt.props.value,\r\n        });\r\n\r\n        if (opt.props.value == \"login\") {\r\n            history.push(\"/login\");\r\n        } else if (opt.props.value == \"scan\") {\r\n            history.push(\"/scan\");\r\n        } else {\r\n            this.showActionSheet();\r\n        }\r\n    }\r\n    showActionSheet = () => {\r\n        const BUTTONS = ['拍照', '从手机相册选择', '使用相机拍照', '删除', '取消'];\r\n        ActionSheet.showActionSheetWithOptions({\r\n            options: BUTTONS,\r\n            cancelButtonIndex: BUTTONS.length - 1,\r\n            destructiveButtonIndex: BUTTONS.length - 2,\r\n            // title: 'title',\r\n            message: 'wh1910-app',\r\n            maskClosable: true,\r\n            'data-seed': 'logId',\r\n            wrapProps: {\r\n                onTouchStart: e => e.preventDefault(),\r\n            }\r\n        },\r\n            (buttonIndex) => {\r\n                console.log(buttonIndex)\r\n            });\r\n    }\r\n\r\n\r\n    render() {\r\n        const {\r\n            scan,\r\n            login\r\n        } = this.props\r\n        return (\r\n            <div>\r\n                <Popover\r\n                    mask\r\n                    overlayClassName=\"fortest\"\r\n                    overlayStyle={{ color: 'currentColor' }}\r\n                    visible={this.state.visible}\r\n                    overlay={[\r\n                        (!scan && <Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                        (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                        (!login && <Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                            <span style={{ marginRight: 5 }}>登录</span>\r\n                        </Item>),\r\n                    ]}\r\n                    align={{\r\n                        overflow: { adjustY: 0, adjustX: 0 },\r\n                        offset: [-10, 0],\r\n                    }}\r\n                    onVisibleChange={this.handleVisibleChange}\r\n                    onSelect={this.onSelect}\r\n                >\r\n                    <Icon type=\"ellipsis\" />\r\n                </Popover>\r\n            </div>\r\n        )\r\n    }\r\n}","import { observable, action, computed, autorun } from \"mobx\";\r\nimport { axios } from \"&\"\r\n\r\nclass Detail {\r\n    @observable goodsId = \"\"\r\n    @observable count = 1\r\n    @observable flag = \"\"\r\n    @observable over_image_url = \"\"\r\n    @observable sale_point = \"\"\r\n    @observable item_name = \"\"\r\n    @observable min_price = \"\"\r\n    @observable goodsInfo = []\r\n    @observable mylove = []\r\n    @observable inTocart = []\r\n\r\n\r\n    @action countAdd = () => {\r\n        this.count++\r\n\r\n    }\r\n    @action countDesc = () => {\r\n        this.count--\r\n    }\r\n    @computed get newCount() {\r\n        return this.count * 2\r\n    }\r\n\r\n\r\n\r\n    @action getFlag = () => {\r\n        return this.flag = !this.flag\r\n    }\r\n\r\n\r\n\r\n    @action getFlag2 = async (goodsName, mobile) => {\r\n        // console.log(goodsName, mobile)\r\n        const res = await axios.post(\"/react/getFlag\", { goodsName, mobile })\r\n        // console.log(res.data.flag)\r\n        return this.flag = res.data.flag\r\n\r\n    }\r\n\r\n    @action insertMyLove = async (flag, goodsName, mobile, over_image_url, sale_point) => {\r\n        console.log(over_image_url, sale_point)\r\n        const res = await axios.post(\"/react/insertmylove\", { flag, goodsName, mobile, over_image_url, sale_point })\r\n\r\n        return this.mylove = res.data.result\r\n\r\n    }\r\n\r\n    @action getGoodsMsg = async (goodsId) => {\r\n        const res = await axios.post(\"/react/getgoodsmsg\", { goodsId })\r\n        return this.goodsInfo = res.data.result, this.over_image_url = res.data.result.over_image_url, this.sale_point == res.data.result.sale_point, this.item_name = res.data.result.item_name, this.min_price == res.data.result.min_price\r\n\r\n    }\r\n    // detail.inToCart(mobile, goodsName, count, detail.over_image_url, detail.sale_point)\r\n\r\n    @action inToCart = async (mobile, goodsName, count, over_image_url, sale_point, item_name, min_price) => {\r\n\r\n        const res = await axios.post(\"/react/intocart\", { mobile, goodsName, count, over_image_url, sale_point, item_name, min_price })\r\n\r\n        return this.inTocart = res.data.result\r\n\r\n    }\r\n}\r\n\r\nexport default new Detail()","import \"./index.scss\"\r\nimport React, { Component } from \"react\"\r\nimport Head from \"~/components/head\"\r\nimport { history } from \"&\"\r\nimport detail from \"../../mobx/detail\"\r\nimport { observer } from \"mobx-react\"\r\nimport { Badge } from \"antd-mobile\"\r\n@observer\r\nclass Detail extends Component {\r\n    cosnt\r\n    componentWillMount() {\r\n        var goodsId = new URLSearchParams(this.props.location.search).get('goodsName')\r\n        detail.getGoodsMsg(goodsId)\r\n        var goodsName = new URLSearchParams(this.props.location.search).get('goodsName')\r\n        var mobile = sessionStorage.mobile\r\n\r\n        detail.getFlag2(goodsName, mobile)\r\n\r\n    }\r\n    inMylOVE = () => {\r\n        var goodsName = new URLSearchParams(this.props.location.search).get('goodsName')\r\n\r\n        detail.getFlag(detail.flag)\r\n        var flag = detail.flag\r\n        var mobile = sessionStorage.mobile\r\n        var over_image_url = detail.over_image_url\r\n        var sale_point = detail.goodsInfo.sale_point\r\n        detail.insertMyLove(flag, goodsName, mobile,over_image_url,sale_point)\r\n    }\r\n    byGood() {\r\n        history.push(`/main/cart`);\r\n    }\r\n    insertCart = () => {\r\n        var goodsName = new URLSearchParams(this.props.location.search).get('goodsName')\r\n        var mobile = sessionStorage.mobile\r\n        var count = detail.count\r\n        // console.log(count)\r\n        var over_image_url = detail.over_image_url\r\n        var sale_point = detail.goodsInfo.sale_point\r\n        var item_name = detail.goodsInfo.item_name\r\n        var min_price = detail.goodsInfo.min_price\r\n\r\n        detail.inToCart(mobile, goodsName, count, over_image_url, sale_point, item_name, min_price)\r\n\r\n    }\r\n    render() {\r\n        const {\r\n            location\r\n        } = this.props\r\n        const {\r\n            count,\r\n            getGoodsMsg,\r\n            goodsInfo,\r\n            getFlag,\r\n            insertMyLove,\r\n            getFlag2,\r\n            inToCart,\r\n            over_image_url,\r\n            sale_point,\r\n            flag\r\n        } = detail\r\n        // console.log(detail.getGoodsMsg)\r\n\r\n        return (\r\n            <div>\r\n                <Head title={new URLSearchParams(location.search).get('goodsName').slice(0, 12) + \"...\"} search={true} show={true}></Head>\r\n                {\r\n                    detail.goodsInfo &&\r\n\r\n                    <div className=\"detail_box\">\r\n                        {\r\n                            detail.goodsInfo.over_image_url &&\r\n                            <div className=\"detail_box_imgbox\"><img src={detail.goodsInfo.over_image_url} alt=\"\" /></div>\r\n\r\n                        }\r\n\r\n\r\n\r\n\r\n                        <div className=\"detail_box_session\">\r\n                            <h2 className=\"detail_box_title\">{detail.goodsInfo.item_name}\r\n\r\n                                <span onClick={() => this.inMylOVE()}>\r\n                                    {\r\n\r\n                                        <i className=\"iconfont  icon-xihuan link\" style={flag && flag ? { color: \" #ff6692\" } : { color: \"black\" }}  ></i>\r\n                                    }\r\n\r\n                                </span>\r\n\r\n\r\n                            </h2>\r\n                            <p className=\"box_p1\">￥{detail.goodsInfo.min_price / 100}\r\n\r\n\r\n                            </p>\r\n                            <div>{detail.goodsInfo.sale_point}</div>\r\n\r\n\r\n\r\n                            {\r\n                                detail.goodsInfo.item_groups &&\r\n                                detail.goodsInfo.item_groups.map((item,i) => (\r\n                                    <div className=\"box_huodong\" key={i}>\r\n                                        <p>{item.activity_name}</p>\r\n                                        <p>{item.activity_brief}</p>\r\n                                        <p>{item.activity_title}</p>\r\n                                    </div>\r\n                                ))\r\n                            }\r\n\r\n\r\n\r\n\r\n                            <div className=\"box_youhuiquan\">\r\n                                <div className=\"box_yhq_title\"></div>\r\n                                <div className=\"box_tag\">满20送10券</div>\r\n                                <div className=\"box_tag\">满60送30券</div>\r\n                                <div className=\"box_tag\">满120倒贴120券</div>\r\n                            </div>\r\n                            <div className=\"box_mz\">\r\n                                <Badge text=\"满赠\"\r\n                                    style={{\r\n                                        padding: '0 3px',\r\n                                        backgroundColor: '#fff',\r\n                                        borderRadius: 2,\r\n                                        color: '#ff6692',\r\n                                        border: '1px solid #ff6692',\r\n                                    }}\r\n                                />\r\n                                <span className=\"box_mz1\">{detail.goodsInfo.promotions}</span>\r\n                            </div>\r\n                            <div className=\"box_mz\">\r\n                                <Badge text=\"全场包邮\"\r\n                                    style={{\r\n                                        padding: '0 3px',\r\n                                        backgroundColor: '#fff',\r\n                                        borderRadius: 2,\r\n                                        color: '#ff6692',\r\n                                        border: '1px solid #ff6692',\r\n                                    }}\r\n                                />\r\n                                <span className=\"box_mz1\"> 购买即发顺丰速邮 </span>\r\n                            </div>\r\n                            <div className=\"box_mz\">\r\n                                <Badge text=\"会员特权\"\r\n                                    style={{\r\n                                        padding: '0 3px',\r\n                                        backgroundColor: '#fff',\r\n                                        borderRadius: 2,\r\n                                        color: '#ff6692',\r\n                                        border: '1px solid #ff6692',\r\n                                    }}\r\n                                />\r\n                                <span className=\"box_mz1\">会员享受0.7折</span>\r\n                            </div>\r\n                            <img style={{ width: \"100%\" }} src=\"https://image.watsons.com.cn//upload/718a4c90.jpg?x-oss-process=image/format,webp/interlace,1/quality,Q_70\" alt=\"\" />\r\n                            <img style={{ width: \"100%\" }} src=\"https://image.watsons.com.cn/upload/b8b2fafd.jpeg?x-oss-process=image/format,webp/interlace,1/quality,Q_70\" alt=\"\" />\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                }\r\n                <div className=\"detail_foot\">\r\n                    <div className=\"detail_gocart\" onClick={this.insertCart}  >加入购物车</div>\r\n                    <div className=\"detail_by\" onClick={this.byGood} >立即购买</div>\r\n\r\n\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default Detail"],"sourceRoot":""}